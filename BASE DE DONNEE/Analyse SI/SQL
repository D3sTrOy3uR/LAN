DROP TABLE IF EXISTS Sponsor ;
CREATE TABLE Sponsor (IDSponsor BIGINT AUTO_INCREMENT NOT NULL,
NomSponsor VARCHAR(50),
IDHote BIGINT,
PRIMARY KEY (IDSponsor)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Achat ;
CREATE TABLE Achat (IDAchat BIGINT AUTO_INCREMENT NOT NULL,
NomAchat VARCHAR(50),
NombreAchat INT,
IDHote BIGINT,
PRIMARY KEY (IDAchat)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Evenement ;
CREATE TABLE Evenement (IDEvenement BIGINT AUTO_INCREMENT NOT NULL,
NomEvenement VARCHAR(50),
DateEvenement DATE,
IDHote BIGINT,
IDLieu BIGINT,
PRIMARY KEY (IDEvenement)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Lieu ;
CREATE TABLE Lieu (IDLieu BIGINT AUTO_INCREMENT NOT NULL,
VilleLieu VARCHAR(50),
CodePostalLieu INT,
AdresseLieu VARCHAR(50),
PRIMARY KEY (IDLieu)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Salle ;
CREATE TABLE Salle (IDSalle BIGINT AUTO_INCREMENT NOT NULL,
NumeroSalle INT,
NombrePlaceSalle INT,
IDHote BIGINT,
IDPlanning BIGINT,
PRIMARY KEY (IDSalle)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Planning ;
CREATE TABLE Planning (IDPlanning BIGINT AUTO_INCREMENT NOT NULL,
JourPlanning VARCHAR(50),
HorrairePlanning VARCHAR(50),
IDHote BIGINT,
PRIMARY KEY (IDPlanning)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Jeu ;
CREATE TABLE Jeu (IDJeu BIGINT AUTO_INCREMENT NOT NULL,
NomJeu VARCHAR(50),
CategorieJeu VARCHAR(50),
IDEvenement BIGINT,
PRIMARY KEY (IDJeu)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Hote ;
CREATE TABLE Hote (IDHote BIGINT AUTO_INCREMENT NOT NULL,
NomHote VARCHAR(50),
PrenomHote VARCHAR(50),
TelephoneHote INT,
IDEvenement BIGINT,
IDPlanning BIGINT,
PRIMARY KEY (IDHote)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Joueur ;
CREATE TABLE Joueur (IDJoueur BIGINT AUTO_INCREMENT NOT NULL,
PseudoJoueur VARCHAR(50),
NomJoueur VARCHAR(50),
PrenomJoueur VARCHAR(50),
AgeJoueur INT,
IDEquipe BIGINT,
IDJeu BIGINT,
IDEvenement BIGINT,
IDTournoi BIGINT,
PRIMARY KEY (IDJoueur)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Equipement ;
CREATE TABLE Equipement (IDEquipement BIGINT AUTO_INCREMENT NOT NULL,
NomEquipement VARCHAR(50),
NombreEquipement INT,
IDJoueur BIGINT,
PRIMARY KEY (IDEquipement)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Equipe ;
CREATE TABLE Equipe (IDEquipe BIGINT AUTO_INCREMENT NOT NULL,
NomEquipe VARCHAR(50),
NombrePlaceEquipe INT,
ScoreEquipe INT,
PRIMARY KEY (IDEquipe)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Materiel ;
CREATE TABLE Materiel (IDMateriel BIGINT AUTO_INCREMENT NOT NULL,
NomMateriel VARCHAR(50),
IDEvenement BIGINT,
PRIMARY KEY (IDMateriel)) ENGINE=InnoDB;

DROP TABLE IF EXISTS TypeMateriel ;
CREATE TABLE TypeMateriel (IDTypeMateriel BIGINT AUTO_INCREMENT NOT NULL,
NomTypeMateriel VARCHAR(50),
PRIMARY KEY (IDTypeMateriel)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Tournoi ;
CREATE TABLE Tournoi (IDTournoi BIGINT AUTO_INCREMENT NOT NULL, 
NombreEquipeTournoi INT, 
IDEvenement BIGINT, 
IDPlanning BIGINT,
PRIMARY KEY (IDTournoi)) ENGINE=InnoDB;

DROP TABLE IF EXISTS Faire_Parti ;
CREATE TABLE Faire_Parti (IDMateriel BIGINT AUTO_INCREMENT NOT NULL, 
IDTypeMateriel BIGINT NOT NULL,
PRIMARY KEY (IDMateriel,IDTypeMateriel)) ENGINE=InnoDB;

ALTER TABLE Sponsor ADD CONSTRAINT FK_Sponsor_IDHote FOREIGN KEY (IDHote) REFERENCES Hote (IDHote);

ALTER TABLE Achat ADD CONSTRAINT FK_Achat_IDHote FOREIGN KEY (IDHote) REFERENCES Hote (IDHote);
ALTER TABLE Evenement ADD CONSTRAINT FK_Evenement_IDHote FOREIGN KEY (IDHote) REFERENCES Hote (IDHote);
ALTER TABLE Evenement ADD CONSTRAINT FK_Evenement_IDLieu FOREIGN KEY (IDLieu) REFERENCES Lieu (IDLieu);
ALTER TABLE Salle ADD CONSTRAINT FK_Salle_IDHote FOREIGN KEY (IDHote) REFERENCES Hote (IDHote);
ALTER TABLE Salle ADD CONSTRAINT FK_Salle_IDPlanning FOREIGN KEY (IDPlanning) REFERENCES Planning (IDPlanning);
ALTER TABLE Planning ADD CONSTRAINT FK_Planning_IDHote FOREIGN KEY (IDHote) REFERENCES Hote (IDHote);
ALTER TABLE Jeu ADD CONSTRAINT FK_Jeu_IDEvenement FOREIGN KEY (IDEvenement) REFERENCES Evenement (IDEvenement);
ALTER TABLE Hote ADD CONSTRAINT FK_Hote_IDEvenement FOREIGN KEY (IDEvenement) REFERENCES Evenement (IDEvenement);
ALTER TABLE Hote ADD CONSTRAINT FK_Hote_IDPlanning FOREIGN KEY (IDPlanning) REFERENCES Planning (IDPlanning);
ALTER TABLE Joueur ADD CONSTRAINT FK_Joueur_IDEquipe FOREIGN KEY (IDEquipe) REFERENCES Equipe (IDEquipe);
ALTER TABLE Joueur ADD CONSTRAINT FK_Joueur_IDJeu FOREIGN KEY (IDJeu) REFERENCES Jeu (IDJeu);
ALTER TABLE Joueur ADD CONSTRAINT FK_Joueur_IDEvenement FOREIGN KEY (IDEvenement) REFERENCES Evenement (IDEvenement);
ALTER TABLE Joueur ADD CONSTRAINT FK_Joueur_IDTournoi FOREIGN KEY (IDTournoi) REFERENCES Tournoi (IDTournoi);
ALTER TABLE Equipement ADD CONSTRAINT FK_Equipement_IDJoueur FOREIGN KEY (IDJoueur) REFERENCES Joueur (IDJoueur);
ALTER TABLE Materiel ADD CONSTRAINT FK_Materiel_IDEvenement FOREIGN KEY (IDEvenement) REFERENCES Evenement (IDEvenement);
ALTER TABLE Tournoi ADD CONSTRAINT FK_Tournoi_IDEvenement FOREIGN KEY (IDEvenement) REFERENCES Evenement (IDEvenement);
ALTER TABLE Tournoi ADD CONSTRAINT FK_Tournoi_IDPlanning FOREIGN KEY (IDPlanning) REFERENCES Planning (IDPlanning);
ALTER TABLE Faire_Parti ADD CONSTRAINT FK_Faire_Parti_IDMateriel FOREIGN KEY (IDMateriel) REFERENCES Materiel (IDMateriel);
ALTER TABLE Faire_Parti ADD CONSTRAINT FK_Faire_Parti_IDTypeMateriel FOREIGN KEY (IDTypeMateriel) REFERENCES TypeMateriel (IDTypeMateriel);
